<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VIBE 24 - คลื่นเพลงฮิต...ต่อเนื่อง 24 ชั่วโมง</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Prompt:wght@300;400;600&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        vibeRed: '#E31E24',
                        vibeBlack: '#000000',
                        vibeDark: '#111111',
                        vibeGray: '#333333',
                    },
                    fontFamily: {
                        sans: ['Prompt', 'sans-serif'],
                        montserrat: ['Montserrat', 'sans-serif'],
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'sound-wave': 'wave 1.2s ease-in-out infinite',
                    },
                    keyframes: {
                        wave: {
                            '0%, 100%': { height: '10%' },
                            '50%': { height: '60%' },
                        }
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #000000;
            color: #ffffff;
            font-family: 'Prompt', sans-serif;
            overflow-x: hidden;
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #111; 
        }
        ::-webkit-scrollbar-thumb {
            background: #333; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #E31E24; 
        }

        .text-shadow-glow {
            text-shadow: 0 0 20px rgba(227, 30, 36, 0.5);
        }

        .visualizer-bar {
            width: 6px;
            background: #E31E24;
            border-radius: 999px;
            animation: wave 1s ease-in-out infinite;
        }
        
        .visualizer-bar:nth-child(odd) {
            animation-duration: 0.8s;
            background: #fff;
        }
        
        .visualizer-bar:nth-child(2n) { animation-duration: 1.1s; }
        .visualizer-bar:nth-child(3n) { animation-duration: 1.3s; }
        .visualizer-bar:nth-child(4n) { animation-duration: 0.9s; }
        
        .paused .visualizer-bar {
            animation-play-state: paused;
            height: 5px !important;
            transition: height 0.3s ease;
        }

        /* Glassmorphism for player */
        .glass-panel {
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* Request Widget Styling Override if possible, otherwise wrapper */
        .request-wrapper iframe {
            width: 100%;
            border: none;
        }
    </style>
</head>
<body class="flex flex-col min-h-screen bg-vibeBlack bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')]">

    <!-- Navbar -->
    <nav class="fixed w-full z-50 transition-all duration-300 bg-gradient-to-b from-black/90 to-transparent py-4 px-6 md:px-12 flex justify-between items-center">
        <div class="flex items-center gap-4">
            <!-- Logo -->
            <img src="https://img2.pic.in.th/1000074512.png" alt="VIBE 24 Logo" class="h-12 md:h-16 object-contain drop-shadow-lg">
        </div>
        
        <div class="hidden md:flex items-center gap-8">
            <a href="#" class="text-white hover:text-vibeRed transition-colors font-montserrat font-bold uppercase text-sm tracking-widest">Home</a>
            <a href="#schedule" class="text-gray-400 hover:text-vibeRed transition-colors font-montserrat font-bold uppercase text-sm tracking-widest">Schedule</a>
            <a href="#request" class="text-gray-400 hover:text-vibeRed transition-colors font-montserrat font-bold uppercase text-sm tracking-widest">Requests</a>
            <div class="flex items-center gap-2 px-3 py-1 bg-vibeRed/20 border border-vibeRed/50 rounded-full">
                <div class="w-2 h-2 bg-vibeRed rounded-full animate-pulse"></div>
                <span class="text-vibeRed text-xs font-bold uppercase tracking-wider">Live On Air</span>
            </div>
        </div>

        <!-- Mobile Menu Button -->
        <button class="md:hidden text-white text-2xl">
            <i class="fa-solid fa-bars"></i>
        </button>
    </nav>

    <!-- Hero / Player Section -->
    <main class="flex-grow flex items-center justify-center relative pt-20 pb-10 px-4">
        <!-- Background Glow -->
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-vibeRed/10 rounded-full blur-[100px] -z-10"></div>

        <div class="w-full max-w-5xl grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
            
            <!-- Left: Artwork & Visuals -->
            <div class="flex flex-col items-center md:items-end order-2 md:order-1 relative">
                <div class="relative group w-64 h-64 md:w-96 md:h-96">
                    <!-- Rotating Ring -->
                    <div class="absolute inset-0 border-2 border-dashed border-vibeRed/30 rounded-full animate-[spin_10s_linear_infinite]"></div>
                    <div class="absolute inset-4 border border-white/10 rounded-full"></div>
                    
                    <!-- Artwork Container -->
                    <div class="absolute inset-6 rounded-full overflow-hidden shadow-2xl shadow-vibeRed/20 bg-vibeDark flex items-center justify-center">
                        <img id="track-artwork" src="https://img2.pic.in.th/1000074512.png" alt="Album Art" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                        <!-- Placeholder if no image -->
                        <div id="artwork-placeholder" class="absolute inset-0 flex items-center justify-center bg-vibeDark hidden">
                            <i class="fa-solid fa-music text-4xl text-vibeGray"></i>
                        </div>
                    </div>

                    <!-- Play Button Overlay (Center) -->
                    <button id="main-play-btn" onclick="togglePlay()" class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-vibeRed hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg shadow-red-600/50 transition-all hover:scale-110 z-20 group">
                        <i id="play-icon" class="fa-solid fa-play text-2xl ml-1"></i>
                    </button>
                </div>
            </div>

            <!-- Right: Info & Controls -->
            <div class="flex flex-col items-center md:items-start text-center md:text-left order-1 md:order-2 space-y-6">
                
                <div class="space-y-1">
                    <h2 class="text-vibeRed font-montserrat font-black text-xl tracking-widest uppercase">Now Playing</h2>
                    <h1 id="track-title" class="text-3xl md:text-5xl font-bold text-white leading-tight text-shadow-glow">
                        Loading...
                    </h1>
                    <p id="track-artist" class="text-lg text-gray-400 font-light">VIBE 24 Station</p>
                </div>

                <!-- Live Visualizer -->
                <div id="visualizer" class="h-12 flex items-end gap-1 paused opacity-50 transition-opacity duration-300">
                    <div class="visualizer-bar h-8"></div>
                    <div class="visualizer-bar h-12"></div>
                    <div class="visualizer-bar h-6"></div>
                    <div class="visualizer-bar h-10"></div>
                    <div class="visualizer-bar h-14"></div>
                    <div class="visualizer-bar h-8"></div>
                    <div class="visualizer-bar h-4"></div>
                    <div class="visualizer-bar h-10"></div>
                </div>

                <!-- Next Track & Controls -->
                <div class="w-full max-w-md bg-white/5 rounded-xl p-4 backdrop-blur-sm border border-white/10">
                    <div class="flex items-center justify-between mb-4">
                        <div class="text-xs text-gray-500 uppercase font-bold tracking-wider">Next Up</div>
                        <div class="text-xs text-vibeRed uppercase font-bold tracking-wider"><i class="fa-solid fa-clock mr-1"></i> Coming Soon</div>
                    </div>
                    <!-- Legacy Script Wrapper for Next Song (Hidden if API works, or used as fallback) -->
                    <div class="text-sm text-gray-300 font-medium truncate">
                        <span id="next-track-display">Loading next track info...</span>
                        
                        <!-- Hidden container for the provided script to run, we extract text if possible or just let it sit -->
                        <div id="script-next-container" class="hidden">
                           <!-- Script injected dynamically on load -->
                        </div>
                    </div>

                    <!-- Volume Control -->
                    <div class="mt-4 flex items-center gap-3">
                        <button onclick="toggleMute()" class="text-gray-400 hover:text-white"><i id="vol-icon" class="fa-solid fa-volume-high"></i></button>
                        <input type="range" id="volume-slider" min="0" max="1" step="0.1" value="0.8" class="w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-vibeRed">
                    </div>
                </div>

            </div>
        </div>
    </main>

    <!-- Request Section -->
    <section id="request" class="py-16 bg-gradient-to-t from-vibeDark to-black border-t border-white/5">
        <div class="container mx-auto px-6 text-center">
            <h2 class="text-3xl font-montserrat font-bold text-white mb-2">REQUEST A <span class="text-vibeRed">TRACK</span></h2>
            <p class="text-gray-400 mb-8">อยากฟังเพลงอะไร? ขอเข้ามาได้เลยตลอด 24 ชั่วโมง</p>

            <div class="max-w-4xl mx-auto bg-white rounded-lg overflow-hidden shadow-2xl">
                 <!-- The Request Script -->
                 <div class="w-full h-[600px] md:h-[500px]">
                    <!-- Using iframe to contain the script safely -->
                    <iframe src="about:blank" id="request-iframe" class="w-full h-full border-0"></iframe>
                 </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-vibeDark border-t border-vibeRed py-8">
        <div class="container mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-2">
                <img src="https://img2.pic.in.th/1000074512.png" alt="Logo" class="h-8">
                <span class="text-white font-montserrat font-bold text-lg">VIBE<span class="text-vibeRed">24</span></span>
            </div>
            <p class="text-gray-500 text-sm">© 2024 VIBE 24. All Rights Reserved. คลื่นเพลงฮิต...ต่อเนื่อง 24 ชั่วโมง</p>
            <div class="flex gap-4">
                <a href="#" class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center text-white hover:bg-vibeRed transition-colors"><i class="fa-brands fa-facebook-f"></i></a>
                <a href="#" class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center text-white hover:bg-vibeRed transition-colors"><i class="fa-brands fa-instagram"></i></a>
                <a href="#" class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center text-white hover:bg-vibeRed transition-colors"><i class="fa-brands fa-tiktok"></i></a>
            </div>
        </div>
    </footer>

    <!-- Audio Element -->
    <audio id="audio-player" preload="none">
        <source src="https://streaming.radio.co/sbf4f79825/listen" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Logic Script -->
    <script>
        const stationId = 'sbf4f79825';
        const audio = document.getElementById('audio-player');
        const playBtn = document.getElementById('main-play-btn');
        const playIcon = document.getElementById('play-icon');
        const visualizer = document.getElementById('visualizer');
        const volSlider = document.getElementById('volume-slider');
        
        let isPlaying = false;

        // Player Logic
        function togglePlay() {
            if (isPlaying) {
                audio.pause();
                playIcon.classList.remove('fa-pause');
                playIcon.classList.add('fa-play');
                visualizer.classList.add('paused');
                visualizer.classList.remove('opacity-100');
                visualizer.classList.add('opacity-50');
            } else {
                audio.play();
                playIcon.classList.remove('fa-play');
                playIcon.classList.add('fa-pause');
                visualizer.classList.remove('paused');
                visualizer.classList.remove('opacity-50');
                visualizer.classList.add('opacity-100');
            }
            isPlaying = !isPlaying;
        }

        // Volume Logic
        volSlider.addEventListener('input', (e) => {
            audio.volume = e.target.value;
            updateVolIcon(e.target.value);
        });

        function updateVolIcon(val) {
            const icon = document.getElementById('vol-icon');
            icon.className = 'fa-solid';
            if(val == 0) icon.classList.add('fa-volume-xmark');
            else if(val < 0.5) icon.classList.add('fa-volume-low');
            else icon.classList.add('fa-volume-high');
        }

        function toggleMute() {
            if(audio.volume > 0) {
                audio.dataset.prevVol = audio.volume;
                audio.volume = 0;
                volSlider.value = 0;
            } else {
                audio.volume = audio.dataset.prevVol || 0.8;
                volSlider.value = audio.volume;
            }
            updateVolIcon(audio.volume);
        }

        // --- MODERN DATA FETCHING ---
        // Instead of using document.write which breaks dynamic pages, we fetch the data from Radio.co API
        
        async function updateTrackInfo() {
            try {
                // Fetch public status
                const response = await fetch(`https://public.radio.co/stations/${stationId}/status`);
                const data = await response.json();
                
                // Update Title
                const titleElement = document.getElementById('track-title');
                const artistElement = document.getElementById('track-artist');
                
                const fullTitle = data.current_track.title; // Usually "Artist - Song"
                const parts = fullTitle.split(' - ');
                
                if (parts.length > 1) {
                    artistElement.innerText = parts[0];
                    titleElement.innerText = parts.slice(1).join(' - ');
                } else {
                    artistElement.innerText = 'VIBE 24';
                    titleElement.innerText = fullTitle;
                }

                // Update Artwork
                const artElement = document.getElementById('track-artwork');
                const newArt = data.current_track.artwork_url;
                if(newArt && newArt !== artElement.src) {
                    artElement.src = newArt;
                }
                // Fallback to default logo if artwork is the default radio.co placeholder or null
                if (!newArt || newArt.includes('default_artwork')) {
                   artElement.src = "https://img2.pic.in.th/1000074512.png";
                }

                // Update Next Track (Attempt from History/Next API if available, else standard fallback)
                // Note: Standard status API often doesn't show next unless programmed. 
                // We will simulate fetching the text from the provided script URL via a proxy or just using previous methods.
                // Since we can't easily cross-origin fetch the script content to parse it, 
                // and the status API doesn't always have 'next_track', we will leave the "Next Up" as generic or 
                // try a specific endpoint if known. 
                // For this demo, let's update it if the API provides it.
                if (data.next_track) {
                    document.getElementById('next-track-display').innerText = data.next_track.title;
                } else {
                    document.getElementById('next-track-display').innerText = "Upcoming Hits...";
                }

            } catch (error) {
                console.error("Error fetching radio data:", error);
            }
        }

        // Initial Load & Interval
        updateTrackInfo();
        setInterval(updateTrackInfo, 10000); // Refresh every 10 seconds

        // --- REQUEST WIDGET INJECTION ---
        // Injecting the user's request script into the iframe to ensure it renders correctly without breaking main DOM
        const requestFrame = document.getElementById('request-iframe');
        const requestDoc = requestFrame.contentWindow.document;
        requestDoc.open();
        requestDoc.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <style>
                    body { margin: 0; padding: 0; background: #fff; font-family: sans-serif; }
                </style>
            </head>
            <body>
                <script src="https://embed.radio.co/request/w75f0bc0.js"><\/script>
            </body>
            </html>
        `);
        requestDoc.close();

    </script>
</body>
</html>
